<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<template id="blog_page_template_inherit" inherit_id="website_blog.blog_post_short" name="Blog Page Template Inherit">
		<xpath expr="//section[@id='o_wblog_index_content']//div[hasclass('container')]" position="attributes">
			<attribute name="class" add="extended-container snazzy-blogs" separator=" "/>
		</xpath>

        <xpath expr="//section[@id='o_wblog_index_content']//div[contains(@t-attf-class, 'o_container_small')]" position="attributes">
			<attribute name="t-attf-class" separator=" ">col #{'mx-0' if opt_blog_list_view else ''}</attribute>
		</xpath>
	</template>

	<template id="blog_navs_template_inherit" inherit_id="website_blog.blogs_nav" name="Blog Navs Template Inherit">
		<xpath expr="//div[contains(@t-attf-class, 'container')]" position="attributes">
			<attribute name="class" add="extended-container snazzy_blog_navs_blocks pt16" separator=" "/>
		</xpath>
        <xpath expr="//nav[contains(@t-attf-class, 'navbar')]" position="attributes">
			<attribute name="t-attf-class" remove="navbar-light" separator=" "/>
		</xpath>
	</template>
  
	<template id="blog_top_banner_template_inherit" inherit_id="website_blog.opt_blog_cover_post" name="Blog Top Banner Template Inherit">
		<xpath expr="//div[hasclass('justify-content-around')]" position="attributes">
			<attribute name="class" add="extended-container snazzy_blog_top_banner" separator=" "/>
		</xpath>
	</template>

    <template id="blogs_author_inherit" inherit_id="website_blog.post_heading">
        <xpath expr="//a[contains(@t-attf-href, '/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}')]" position="before">
                <t t-if="not opt_blog_list_view">
                    <div class="d-flex align-items-center justify-content-between">
                        <t t-if="opt_posts_loop_show_cover and is_view_active('website_blog.opt_posts_loop_show_author')" t-call="website_blog.post_author">
                            <t t-set="additionnal_classes" t-value="'o_wblog_post_list_author o_list_cover d-flex pt-2  w-100 o_not_editable ' + ('' if opt_blog_list_view else '') "/>
                            <t t-set="hide_date" t-value="True"/>
                        </t>
                        <div t-if="not opt_posts_loop_show_cover">
                            <div class="blog_categ text-nowrap text-truncate">
                                <a t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                            </div>
                        </div>
                        <div t-if="not opt_posts_loop_show_cover and is_view_active('website_blog.opt_posts_loop_show_stats')" class="blog_views">
                            <span class="text-nowrap" title="Comments"><span class="ri ri-chat-1-line text-muted me-1"/><t t-esc="len(blog_post.message_ids)"/></span>
                            <span class="text-nowrap ps-2" title="Views"><span class="ri ri-eye-line text-muted me-1"/><t t-esc="blog_post.visits"/></span>
                        </div>
                    </div>
                </t>
        </xpath>
    </template>

    <template id="blogs_tags_and_date_inherit" inherit_id="website_blog.post_info">
        <xpath expr="//div[contains(@t-attf-class, 'd-flex flex-wrap align-items-center')]" position="replace">
            <t t-if="not opt_blog_list_view">
                <div t-if="is_view_active('website_blog.opt_posts_loop_show_teaser')">
                    <div t-field="blog_post.teaser" class="blog_teaser mt-auto"/>
                </div>
                <div class="blogs_tags_date d-flex align-items-center justify-content-between">
                    <div t-if="is_view_active('website_blog.opt_posts_loop_show_teaser')">
                        <div class="blog_tags">
                            <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                                <a t-attf-href="/blog/tag/#{one_tag.id}" t-attf-class="text-truncate" t-out="one_tag.name"/>
                            </t>
                        </div>
                    </div>
                    <div class="blogs_date">
                        <time t-out="blog_post.post_date" class="text-nowrap" t-options="{'widget': 'datetime', 'date_only': 'true', 'format': 'medium'}"/>
                    </div>
                </div>
            </t>
        </xpath>
    </template>

    <template id="blogs_categ_inherit" inherit_id="website_blog.post_cover_image">
        <xpath expr="//a[contains(@t-attf-href, '/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}')]//t[@t-call='website.record_cover']" position="replace">
            <t t-call="website.record_cover">
                <t t-set="_record" t-value="blog_post"/>
                <t t-set="additionnal_classes" t-value="'o_list_cover o_not_editable ' + (not opt_blog_cards_design and ' rounded overflow-hidden shadow mb-3' or '')"/>
                
                <div t-if="is_view_active('website_blog.opt_posts_loop_show_stats')">
                    <div class="blog_views">
                        <span class="text-nowrap" title="Comments"><span class="ri ri-chat-1-line text-muted me-1"/><t t-esc="len(blog_post.message_ids)"/></span>
                        <span class="text-nowrap ps-2" title="Views"><span class="ri ri-eye-line text-muted me-1"/><t t-esc="blog_post.visits"/></span>
                    </div>
                </div>

                <div class="blog_categ text-nowrap text-truncate">
                    <a t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                </div>
             </t>
        </xpath>
    </template>
   
    <template id="blogs_info_inherit" inherit_id="website_blog.post_teaser">
        <xpath expr="//div[hasclass('o_wblog_post_short_tag_section')]" position="replace">
        </xpath>
        <xpath expr="//a[contains(@t-attf-href, '/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}')]" position="replace">
        </xpath>
    </template>

    <template id="blogs_list_view_inherit" inherit_id="website_blog.posts_loop">
        <xpath expr="//t[@t-if='opt_blog_list_view']/div[1]" position="replace">
        </xpath>

        <xpath expr="//div[contains(@t-attf-class, 'pb-4 col-12')]" position="attributes">
            <attribute name="t-attf-class" add="#{'col-xl-6' if opt_blog_list_view and not opt_blog_sidebar_show else ''}" separator=" "></attribute>
        </xpath>

        <xpath expr="//t[@t-foreach='posts']//div[hasclass('col-12')]" position="attributes">
            <attribute name="class" add="d-none" separator=" "></attribute>
        </xpath>
       
        <xpath expr="//t[@t-if='opt_blog_list_view']/div[4]" position="replace">
            <t t-if="opt_blog_list_view">
                <div t-attf-class="blogs_list_contents #{'ps-4' if opt_posts_loop_show_cover else ('')}">
                    <div class="blogs_title_date d-flex justify-content-between align-items-center mb-2">
                        <div class="blog_title">
                            <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}"
                                t-field="blog_post.name"
                                t-attf-class="d-block text-reset text-decoration-none o_blog_post_title my-0 #{'h3' if opt_blog_list_view else ('h5' if opt_blog_readable else 'h6')}">
                                Untitled Post
                            </a>
                        </div>
                        <div class="blogs_date">
                            <time t-out="blog_post.post_date" class="text-nowrap" t-options="{'widget': 'datetime', 'date_only': 'true', 'format': 'medium'}"/>
                        </div>
                    </div>
                    
                    <div t-if="is_view_active('website_blog.opt_posts_loop_show_teaser')">
                        <div t-field="blog_post.teaser" class="blog_teaser mt-auto"/>
                        <div class="blog_tags mb-1">
                            <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                                <a t-attf-href="/blog/tag/#{one_tag.id}" t-attf-class="text-truncate" t-out="one_tag.name"/>
                            </t>
                        </div>
                    </div>
                    <t t-if="is_view_active('website_blog.opt_posts_loop_show_author')" t-call="website_blog.post_author">
                        <t t-set="additionnal_classes" t-value="'o_wblog_post_list_author o_list_cover d-flex py-1 w-100 o_not_editable ' + ('' if opt_blog_list_view else '') "/>
                        <t t-set="hide_date" t-value="True"/>
                    </t>
                    <div class="d-flex align-items-center justify-content-between">
                        <div t-if="not opt_posts_loop_show_cover">
                            <div class="blog_categ text-nowrap text-truncate">
                                <a t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                            </div>
                        </div>
                        <div t-if="not opt_posts_loop_show_cover and is_view_active('website_blog.opt_posts_loop_show_stats')" class="blog_views">
                            <span class="text-nowrap" title="Comments"><span class="ri ri-chat-1-line text-muted me-1"/><t t-esc="len(blog_post.message_ids)"/></span>
                            <span class="text-nowrap ps-2" title="Views"><span class="ri ri-eye-line text-muted me-1"/><t t-esc="blog_post.visits"/></span>
                        </div>
                    </div>
                </div>
            </t>
        </xpath>

    </template>
</odoo>