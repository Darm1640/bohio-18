<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="website_sale_wishlist_template_inherit" inherit_id="website_sale_wishlist.product_wishlist" name="Product Wishlist template Replace" >
        <xpath expr="//section[hasclass('wishlist-section')]" position="replace">

            <section class="container wishlist-section" id="snazzy_wishlist_page_section">
                <h3 class="text-center">Wishlist Page</h3>
                <div class="text-center"><i class="ri ri-arrow-drop-down-line fa-2x fw-bold"></i></div>
                <div class="checkbox">
                    <label class='text-muted'><input type="checkbox" id='b2b_wish' value="1" class="mr8"/>Add product to my cart but keep it in my wishlist</label>
                </div>
                <table class="table table-borderless table-striped table-hover mt16 table-comparator" id="o_comparelist_table">
                    <thead>
                        <tr>
                            <th>
                                <div class="form-check">
                                    <input class="form-check-input wishlist_product_select_all" type="checkbox" value="" id="flexCheckDefault"/>
                                    <label class="form-check-label" for="flexCheckDefault"></label>
                                </div>
                            </th>
                            <th></th>
                            <th></th>
                            <th class="fw-normal">Product Name</th>
                            <th class="fw-normal">Price</th>
                            <th class="fw-normal">Stock Status</th>
                            <th></th>
                        </tr>
                    </thead>
                    <body>
                        <t t-foreach="wishes" t-as="wish">
                            <t t-set="combination_info" t-value="wish.product_id._get_combination_info_variant()"/>
                            <tr t-att-data-wish-id="wish.id"
                                t-att-data-product-id="wish.product_id.id"
                                t-att-data-product-tracking-info="'product_tracking_info' in combination_info and json.dumps(combination_info['product_tracking_info'])">
                                <td class="product_checkbox align-middle">
                                    <div class="form-check">
                                        <input class="form-check-input input_product_select" type="checkbox" value="" id="flexCheckDefault"/>
                                        <label class="form-check-label" for="flexCheckDefault"></label>
                                    </div>
                                </td>
                                <td class="align-middle">
                                    <button id="remove_to_wishlist_button" type="button" class="btn btn-link o_wish_rm no-decoration shadow-none p-0"><small class="fs-6"><i class='ri ri-close-line fa-fw text-muted'></i> </small></button>
                                </td>
                                <td class='td-img align-middle'>
                                    <a t-att-href="wish.product_id.website_url">
                                        <img t-attf-src="/web/image/product.product/#{wish.product_id.id}/image_128" class="img img-fluid m-auto" alt="Product image"/>
                                    </a>
                                </td>
                                <td class='product_name text-start align-middle '>
                                    <strong><a t-att-href="wish.product_id.website_url" class="fw-normal"><t t-esc="wish.product_id.display_name" /></a></strong>
                                    <small class='d-none d-md-block'><p t-field="wish.product_id.description_sale" class="text-muted"/></small>
                                </td>
                                <t t-if="is_view_active('theme_snazzy.snazzy_b2b_mode') and request.env.user._is_public()">
                                    <td class="text-nowrap align-middle">
                                        <t t-if="is_view_active('theme_snazzy.loginsignup_popup_bizt')">
                                            <a href='#' data-bs-toggle="modal" data-bs-target="#popupuserlogin" t-att-data-theme_name = "request.website.sudo().theme_id.name" class="btn btn-link flat p-0 text-capitalize b2bloginbtn lpopen d-block d-md-inline-block text-decoration-none">
                                                <span class="fa fa-user-circle me-1 text-primary"></span>
                                                <span class="text-primary">Login </span>
                                                <span>to See Price</span>
                                            </a>
                                        </t>
                                        <t t-else=''>
                                            <a role="button" class="btn btn-link b2bloginbtn flat p-0 text-capitalize d-block d-md-inline-block text-decoration-none" href="/web/login">
                                                <span class="fa fa-user-circle me-1 text-primary"></span>
                                                <span class="text-primary">Login </span>
                                                <span>to See Price</span>
                                            </a>
                                        </t>
                                    </td>
                                </t>
                                <t t-else="">
                                    <td class="align-middle" t-if="combination_info['prevent_zero_price_sale']">
                                        <span t-field="website.prevent_zero_price_sale_text"/>
                                    </td>
                                    <td class="align-middle o_wish_price" t-else="">
                                        <t t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                        <small t-if="combination_info['base_unit_price']" class="cart_product_base_unit_price d-block text-muted" groups="website_sale.group_show_uom_price">
                                            <t t-call='website_sale.base_unit_price'><t t-set='product' t-value='wish.product_id' /></t>
                                        </small>
                                    </td>
                                </t>
                                <td class="stock_status stock-badge align-middle">
                                    <t t-set='product' t-value='wish.product_id' />
				                    <t t-set="free_qty" t-value="product.with_context(warehouse=request.website.warehouse_id.id).free_qty"/>

                                    <t t-if="product.type == 'consu' and product.is_storable">
                                        <t t-if="free_qty">
                                            <p class="in-stock-badge mb-0">In Stock</p>
                                        </t>
                                        <t t-else="free_qty ">
                                            <p class="out-stock-badge mb-0">Out of Stock</p>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <p class="in-stock-badge mb-0">In Stock</p>
                                    </t>
                                </td>
                                
                                <t t-if="is_view_active('theme_snazzy.snazzy_b2b_mode') and request.env.user._is_public()">
                                </t>
                                <t t-else="">
                                    <td class='text-center td-wish-btn align-middle'>
                                        <input name="product_id" t-att-value="wish.product_id.id" type="hidden"/>
                                        <a t-if="combination_info['prevent_zero_price_sale']" t-att-href="website.contact_us_button_url" class="btn btn-primary btn_cta">Contact Us</a>
                                        <button id="add_to_cart_button" t-else="" type="button" role="button" class="btn btn-primary btn-block o_wish_add mb4" >
                                            Add <span class='d-none d-md-inline'>to Cart</span>
                                        </button>
                                    </td>
                                </t>
                                
                            </tr>
                        </t>
                    </body>
                </table>

                <div class="add_to_cart_bottom_buttons_in_wishlist py-5">
                    <div class="">
                        <button class="btn btn-secondary rounded-0 wishlist_product_remove_selected d-none">Remove Selected</button>
                    </div>
                    <t t-if="is_view_active('theme_snazzy.snazzy_b2b_mode') and request.env.user._is_public()">
                    </t>
                    <t t-else="">
                        <div class="">
                            <button class="btn btn-secondary rounded-0 wishlist_product_add_selected_to_cart d-none">Add Selected to cart</button>
                            <button class="btn btn-primary rounded-0 wishlist_product_add_all_to_cart">Add All to cart</button>
                        </div>
                    </t>
                </div>
                
            </section>

        </xpath>
	</template>
</odoo>
