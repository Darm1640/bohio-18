<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="mapa_propiedades_view" name="Mapa de Propiedades">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">

                <!-- Header del Mapa -->
                <div class="container-fluid map-header py-3">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-md-6">
                                <h1 class="mb-0">
                                    <i class="bi bi-map-fill"></i> Mapa de Propiedades
                                </h1>
                                <p class="mb-0 property-count-text">
                                    <span id="property-count">0</span> propiedades disponibles
                                </p>
                            </div>
                            <div class="col-md-6 text-end map-header-actions">
                                <button id="btn-geolocate" class="btn btn-geolocate">
                                    <i class="bi bi-geo-alt-fill"></i> Mi Ubicación
                                </button>
                                <a href="/shop" class="btn btn-list">
                                    <i class="bi bi-list-ul"></i> Ver Lista
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenedor del Mapa -->
                <div class="map-container">
                    <div id="bohio-map"></div>

                    <!-- Loading Overlay -->
                    <div id="map-loading" class="map-overlay">
                        <div class="spinner-border text-danger" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                        <p class="mt-3 fw-bold">Cargando propiedades...</p>
                    </div>
                </div>

                <!-- Info Panel -->
                <div class="container my-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert map-info-alert d-flex align-items-center">
                                <i class="bi bi-info-circle-fill me-2 fs-5"></i>
                                <div>
                                    <strong>Tip:</strong> Haz clic en los marcadores para ver más información.
                                    Los marcadores cercanos (menos de 5km) mostrarán el nombre y distancia.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Menú del Website -->
    <record id="menu_mapa_propiedades" model="website.menu">
        <field name="name">Mapa</field>
        <field name="url">/mapa-propiedades</field>
        <field name="parent_id" ref="website.main_menu"/>
        <field name="sequence">15</field>
    </record>
</odoo>		