<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Homepage BOHIO - Versión Mejorada Integrada -->
    <template id="homepage" name="Bohio Real Estate - Home">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty bohio-homepage">
                <!-- Hero Section con Banner -->
                <section class="bohio-hero-section position-relative">
                    <div class="container-fluid p-0">
                        <div class="hero-banner position-relative">
                            <img src="/theme_bohio_real_estate/static/src/img/Imagen_inicio.jpg"
                                 alt="Encuentra tu hogar ideal" class="img-fluid w-100" style="max-height: 600px; object-fit: cover;"/>
                            <div class="hero-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
                                 style="background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.5));">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-lg-10 mx-auto text-center text-white">
                                            <h1 class="display-4 fw-bold mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                                                Encuentra tu hogar ideal
                                            </h1>

                                            <!-- Búsqueda Rápida -->
                                            <div class="quick-search bg-white p-4 rounded-3 shadow-lg mt-5">
                                                <form action="/properties" method="get">
                                                    <div class="row g-3 align-items-end">
                                                        <div class="col-md-2">
                                                            <label class="form-label text-dark small mb-1">Inmueble</label>
                                                            <select name="property_type" class="form-select border-2">
                                                                <option value="">Tipo</option>
                                                                <option value="apartment">Apartamento</option>
                                                                <option value="house">Casa</option>
                                                                <option value="commercial">Comercial</option>
                                                                <option value="lot">Lote</option>
                                                                <option value="office">Oficina</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label class="form-label text-dark small mb-1">Ciudad</label>
                                                            <input type="text" name="city" class="form-control border-2" placeholder="¿Dónde buscas?"/>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="form-label text-dark small mb-1">Habitaciones</label>
                                                            <input type="number" name="bedrooms" class="form-control border-2" placeholder="N°" min="0"/>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="form-label text-dark small mb-1">Baños</label>
                                                            <input type="number" name="bathrooms" class="form-control border-2" placeholder="N°" min="0"/>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <button type="submit" class="btn btn-primary w-100 py-2 fw-semibold">
                                                                <i class="fa fa-search me-2"/> Buscar
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <!-- Búsqueda por código -->
                                                    <div class="row mt-3">
                                                        <div class="col-12 text-center">
                                                            <span class="text-muted small">¿Tienes un código? Realiza tu búsqueda</span>
                                                            <div class="input-group mx-auto mt-2" style="max-width: 400px;">
                                                                <input type="text" name="code" class="form-control" placeholder="Código (ej: BOH-001)"/>
                                                                <button class="btn btn-outline-primary" type="submit">
                                                                    <i class="fa fa-search"/>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="oe_structure oe_empty"></div>

                <!-- Nuestros Servicios -->
                <section class="bohio-services py-5">
                    <div class="container">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <span class="badge bg-primary px-3 py-2">Nuestros servicios</span>
                            </div>
                        </div>

                        <div class="row g-4">
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/areas_1-8.png" alt="Estudio social" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Estudio social</h6>
                                </div>
                            </div>
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/avaluos.gif" alt="Avalúos" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Avalúos</h6>
                                </div>
                            </div>
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/negocios_.gif" alt="Negocios corporativos" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Negocios corporativos</h6>
                                </div>
                            </div>
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/servicios_juridico.gif" alt="Servicios jurídicos" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Servicios jurídicos</h6>
                                </div>
                            </div>
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/marketing_digital.gif" alt="Marketing digital" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Marketing digital</h6>
                                </div>
                            </div>
                            <div class="col-md-2 col-6">
                                <div class="service-card text-center p-3 h-100 bg-white rounded-3 shadow-sm">
                                    <div class="service-icon mb-2">
                                        <img src="/theme_bohio_real_estate/static/src/img/firma_digital.gif" alt="Firma digital" style="width: 60px; height: 60px;"/>
                                    </div>
                                    <h6 class="mb-0">Firma digital</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="oe_structure oe_empty"></div>

                <!-- Arriendo -->
                <section class="bohio-arriendo py-5 bg-light">
                    <div class="container">
                        <div class="mb-4">
                            <span class="badge bg-primary px-3 py-2">Arriendo</span>
                        </div>
                        <h2 class="mb-4">Te <span class="fw-bold">ayudamos</span> a encontrar el <span class="text-primary fw-bold">lugar ideal</span> para vivir</h2>

                        <div class="row g-4">
                            <t t-set="rent_properties" t-value="request.env['product.template'].sudo().search([('is_property', '=', True), ('type_service', 'in', ['rent', 'sale_rent']), ('website_published', '=', True)], limit=6)"/>
                            <t t-foreach="rent_properties" t-as="property">
                                <div class="col-lg-4 col-md-6">
                                    <t t-call="theme_bohio_real_estate.property_card"/>
                                </div>
                            </t>
                        </div>
                        <div class="text-center mt-4">
                            <a href="/properties?type_service=rent" class="btn btn-primary px-4">Explora la categoría</a>
                        </div>
                    </div>
                </section>
                <div class="oe_structure oe_empty"></div>

                <!-- Venta -->
                <section class="bohio-used-sale py-5">
                    <div class="container">
                        <div class="mb-4">
                            <span class="badge bg-primary px-3 py-2">Venta de inmuebles</span>
                        </div>
                        <h2 class="mb-4">Te ayudamos a encontrar el <span class="text-primary fw-bold">hogar</span> que estás buscando</h2>

                        <div class="row g-4">
                            <t t-set="sale_properties" t-value="request.env['product.template'].sudo().search([('is_property', '=', True), ('type_service', 'in', ['sale', 'sale_rent']), ('website_published', '=', True)], limit=6)"/>
                            <t t-foreach="sale_properties" t-as="property">
                                <div class="col-lg-4 col-md-6">
                                    <t t-call="theme_bohio_real_estate.property_card"/>
                                </div>
                            </t>
                        </div>
                        <div class="text-center mt-4">
                            <a href="/properties?type_service=sale" class="btn btn-primary px-4">Explora la categoría</a>
                        </div>
                    </div>
                </section>
                <div class="oe_structure oe_empty"></div>
            </div>
        </t>
    </template>

    <!-- Property Card Component - Con Favoritos y Comparador -->
    <template id="property_card" name="Property Card">
        <div class="property-card h-100 bg-white rounded-3 shadow-sm overflow-hidden hover_effect_card">
            <div class="property-image position-relative">
                <img t-att-src="'/web/image/product.template/%s/image_1920' % property.id"
                     t-att-alt="property.name" class="img-fluid w-100" style="height: 250px; object-fit: cover;"/>

                <div class="property-badge position-absolute top-0 start-0 m-3" t-if="property.type_service">
                    <span class="badge bg-primary" t-if="property.type_service == 'sale'">Venta</span>
                    <span class="badge bg-success" t-if="property.type_service == 'rent'">Arriendo</span>
                    <span class="badge bg-info" t-if="property.type_service == 'sale_rent'">Venta/Arriendo</span>
                </div>

                <!-- Botones Favoritos y Comparador -->
                <div class="property-actions position-absolute top-0 end-0 m-2">
                    <button class="btn btn-sm btn-light rounded-circle btn-favorite"
                            t-att-data-property-id="property.id"
                            aria-label="Agregar a favoritos"
                            title="Agregar a favoritos"
                            style="width: 36px; height: 36px; padding: 0;">
                        <i class="fa fa-heart-o"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-primary rounded-circle btn-add-comparison ms-1"
                            t-att-data-property-id="property.id"
                            aria-label="Comparar propiedad"
                            title="Comparar propiedad"
                            style="width: 36px; height: 36px; padding: 0;">
                        <i class="fa fa-balance-scale"></i>
                    </button>
                </div>
            </div>

            <div class="property-content p-3">
                <h5 class="property-title mb-2">
                    <a t-attf-href="/property/#{property.id}" class="text-dark text-decoration-none" t-out="property.name"/>
                </h5>

                <div class="property-location mb-3" t-if="property.neighborhood or property.city">
                    <i class="fa fa-map-marker text-muted"></i>
                    <small class="text-muted" t-out="property.neighborhood or property.city"/>
                </div>

                <div class="property-features d-flex justify-content-between mb-3">
                    <div class="feature" t-if="property.num_bedrooms">
                        <i class="fa fa-bed text-muted"></i>
                        <small t-out="property.num_bedrooms"/> Hab.
                    </div>
                    <div class="feature" t-if="property.num_bathrooms">
                        <i class="fa fa-bath text-muted"></i>
                        <small t-out="property.num_bathrooms"/> Baños
                    </div>
                    <div class="feature" t-if="property.property_area">
                        <i class="fa fa-arrows-alt text-muted"></i>
                        <small t-out="'%.0f' % property.property_area"/> m²
                    </div>
                </div>

                <div class="property-footer d-flex justify-content-between align-items-center border-top pt-3">
                    <div class="property-price">
                        <t t-if="property.list_price">
                            <h5 class="mb-0 text-primary custom_fw_700">
                                <t t-esc="property.currency_id.symbol or '$'"/>
                                <t t-esc="'{:,.0f}'.format(property.list_price)"/>
                            </h5>
                        </t>
                    </div>
                    <a t-attf-href="/property/#{property.id}" class="btn btn-sm btn-outline-primary">Ver Detalles</a>
                </div>
            </div>
        </div>
    </template>
</odoo>
