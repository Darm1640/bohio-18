<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="theme_bohio_real_estate.property_detail" name="Property Detail">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure property-detail-page">
                <div class="container mt-4 mb-5">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="card shadow-sm mb-4 border-0" style="border-radius: 16px; overflow: hidden;">
                                <!-- Imagen Principal Cuadrada -->
                                <div class="position-relative" style="width: 100%; padding-top: 75%; overflow: hidden; background: #f8f9fa;">
                                    <t t-if="property.image_1920 or property.image_512">
                                        <img class="position-absolute top-0 start-0 w-100 h-100"
                                             t-att-src="'/web/image/product.template/%s/image_1920' % property.id"
                                             t-att-alt="property.name"
                                             style="object-fit: cover; object-position: center;"/>
                                    </t>
                                    <t t-else="">
                                        <!-- Imagen por defecto BOHIO -->
                                        <img class="position-absolute top-0 start-0 w-100 h-100"
                                             src="/theme_bohio_real_estate/static/src/img/banner1.jpg"
                                             alt="Propiedad BOHIO"
                                             style="object-fit: cover; object-position: center; opacity: 0.7; filter: brightness(0.8);"/>
                                        <div class="position-absolute top-50 start-50 translate-middle text-white text-center"
                                             style="background: rgba(227, 30, 36, 0.95); padding: 20px 40px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                                            <i class="fa fa-image fa-3x mb-2"></i>
                                            <p class="mb-0 fw-bold fs-5">Imagen no disponible</p>
                                        </div>
                                    </t>
                                </div>

                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h1 class="h2 mb-2" t-esc="property.name"/>
                                            <p class="text-muted mb-0">
                                                <i class="fa fa-tag"/> Código: <strong t-esc="property.default_code or 'N/A'"/>
                                            </p>
                                        </div>
                                        <div class="text-end">
                                            <!-- Precio de Venta -->
                                            <t t-if="property.type_service == 'sale' and property.net_price">
                                                <h3 class="text-primary mb-0">
                                                    <span t-field="property.net_price" t-options="{'widget': 'monetary', 'display_currency': property.currency_id}"/>
                                                </h3>
                                                <p class="text-muted small mb-0" t-if="property.price_per_unit">
                                                    <span t-field="property.price_per_unit" t-options="{'widget': 'monetary', 'display_currency': property.currency_id}"/> / m²
                                                </p>
                                            </t>

                                            <!-- Precio de Arriendo -->
                                            <t t-if="property.type_service == 'rent' and property.net_rental_price">
                                                <h3 class="text-primary mb-0">
                                                    <span t-field="property.net_rental_price" t-options="{'widget': 'monetary', 'display_currency': property.currency_id}"/>
                                                    <small class="fs-6 text-muted">/ mes</small>
                                                </h3>
                                            </t>

                                            <!-- Fallback: list_price si no hay net_price -->
                                            <t t-if="not property.net_price and not property.net_rental_price">
                                                <h3 class="text-primary mb-0">
                                                    <span t-field="property.list_price" t-options="{'widget': 'monetary', 'display_currency': property.currency_id}"/>
                                                </h3>
                                            </t>

                                            <span t-if="property.type_service" class="badge bg-info mt-2">
                                                <span t-esc="dict(property._fields['type_service'].selection).get(property.type_service)"/>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- OBSERVACIONES DESTACADAS -->
                                    <t t-if="property.observations">
                                        <div class="alert alert-light border-start border-danger border-4 mb-4">
                                            <h5 class="text-danger mb-3"><i class="fa fa-comment-o"/> Descripción de la Propiedad</h5>
                                            <div t-field="property.observations" class="text-muted" style="white-space: pre-wrap;"/>
                                        </div>
                                    </t>

                                    <hr/>

                                    <!-- UBICACIÓN DETALLADA -->
                                    <div class="row mb-4">
                                        <div class="col-12">
                                            <div class="card bg-light border-0">
                                                <div class="card-body">
                                                    <h5 class="text-danger mb-3"><i class="fa fa-map-marker"/> Ubicación Completa</h5>
                                                    <div class="row">
                                                        <div class="col-md-6 mb-2" t-if="property.address">
                                                            <i class="fa fa-home text-danger me-2"/>
                                                            <strong>Dirección:</strong> <span t-esc="property.address"/>
                                                        </div>
                                                        <div class="col-md-6 mb-2" t-if="property.region_id">
                                                            <i class="fa fa-map text-danger me-2"/>
                                                            <strong>Barrio:</strong> <span t-esc="property.region_id.name"/>
                                                        </div>
                                                        <div class="col-md-6 mb-2" t-if="property.neighborhood">
                                                            <i class="fa fa-building text-danger me-2"/>
                                                            <strong>Sector:</strong> <span t-esc="property.neighborhood"/>
                                                        </div>
                                                        <div class="col-md-6 mb-2" t-if="property.city">
                                                            <i class="fa fa-map-marker text-danger me-2"/>
                                                            <strong>Ciudad:</strong> <span t-esc="property.city"/>
                                                        </div>
                                                        <div class="col-md-6 mb-2" t-if="property.state_id">
                                                            <i class="fa fa-globe text-danger me-2"/>
                                                            <strong>Departamento:</strong> <span t-esc="property.state_id.name"/>
                                                        </div>
                                                        <div class="col-md-6 mb-2" t-if="property.stratum">
                                                            <i class="fa fa-star text-warning me-2"/>
                                                            <strong>Estrato:</strong> <span t-esc="dict(property._fields['stratum'].selection).get(property.stratum)"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- CARACTERÍSTICAS PRINCIPALES -->
                                    <div class="row mb-4">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-list-ul"/> Características Principales</h5>
                                        </div>
                                        <div class="col-md-3 col-6 mb-3" t-if="property.property_area">
                                            <div class="text-center p-3 bg-light rounded">
                                                <i class="fa fa-arrows-alt fa-2x text-danger mb-2"/>
                                                <h4 class="mb-0 text-danger" t-esc="'%.0f' % property.property_area"/>
                                                <small class="text-muted">m² Área Total</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-3" t-if="property.num_bedrooms">
                                            <div class="text-center p-3 bg-light rounded">
                                                <i class="fa fa-bed fa-2x text-danger mb-2"/>
                                                <h4 class="mb-0 text-danger" t-esc="property.num_bedrooms"/>
                                                <small class="text-muted">Habitaciones</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-3" t-if="property.num_bathrooms">
                                            <div class="text-center p-3 bg-light rounded">
                                                <i class="fa fa-bath fa-2x text-danger mb-2"/>
                                                <h4 class="mb-0 text-danger" t-esc="property.num_bathrooms"/>
                                                <small class="text-muted">Baños</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-3" t-if="property.covered_parking or property.uncovered_parking">
                                            <div class="text-center p-3 bg-light rounded">
                                                <i class="fa fa-car fa-2x text-danger mb-2"/>
                                                <h4 class="mb-0 text-danger" t-esc="(property.covered_parking or 0) + (property.uncovered_parking or 0)"/>
                                                <small class="text-muted">Parqueaderos</small>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- DETALLES DE CONSTRUCCIÓN -->
                                    <div class="row mb-4" t-if="property.property_age or property.number_of_levels or property.floor_number or property.property_type_id">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-building"/> Detalles de Construcción</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.property_type_id">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-home fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Tipo de Propiedad</small>
                                                    <strong t-esc="property.property_type_id.name"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.property_age">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-calendar fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Antigüedad</small>
                                                    <strong t-esc="property.property_age"/> <span class="text-muted">años</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.number_of_levels">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-layer-group fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Niveles</small>
                                                    <strong t-esc="property.number_of_levels"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.floor_number">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-sort-numeric-asc fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Piso</small>
                                                    <strong t-esc="property.floor_number"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.apartment_type">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-info-circle fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Tipo</small>
                                                    <strong t-esc="dict(property._fields['apartment_type'].selection).get(property.apartment_type)"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.front_meters">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-arrows-h fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Frente</small>
                                                    <strong t-esc="'%.2f' % property.front_meters"/> <span class="text-muted">m</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-6 mb-3" t-if="property.depth_meters">
                                            <div class="d-flex align-items-center p-3 bg-light rounded">
                                                <i class="fa fa-arrows-v fa-2x text-info me-3"/>
                                                <div>
                                                    <small class="text-muted d-block">Fondo</small>
                                                    <strong t-esc="'%.2f' % property.depth_meters"/> <span class="text-muted">m</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AMENIDADES DEL INMUEBLE -->
                                    <div class="row mb-4" t-if="property.furnished or property.balcony or property.terrace or property.patio or property.garden or property.laundry_area or property.warehouse or property.fireplace or property.mezzanine or property.walk_in_closet or property.dressing_room">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-star"/> Amenidades del Inmueble</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.furnished">
                                            <i class="fa fa-check-circle text-success me-2"/> Amoblado
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.balcony">
                                            <i class="fa fa-check-circle text-success me-2"/> Balcón
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.terrace">
                                            <i class="fa fa-check-circle text-success me-2"/> Terraza
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.patio">
                                            <i class="fa fa-check-circle text-success me-2"/> Patio
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.garden">
                                            <i class="fa fa-check-circle text-success me-2"/> Jardín
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.laundry_area">
                                            <i class="fa fa-check-circle text-success me-2"/> Zona de Lavandería
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.warehouse">
                                            <i class="fa fa-check-circle text-success me-2"/> Depósito/Bodega
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.fireplace">
                                            <i class="fa fa-check-circle text-success me-2"/> Chimenea
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.mezzanine">
                                            <i class="fa fa-check-circle text-success me-2"/> Mezzanine
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.walk_in_closet">
                                            <i class="fa fa-check-circle text-success me-2"/> Walk-in Closet
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.dressing_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Vestidor
                                        </div>
                                    </div>

                                    <!-- SERVICIOS DEL EDIFICIO -->
                                    <div class="row mb-4" t-if="property.elevator or property.private_elevator or property.gym or property.pools or property.social_room or property.green_areas or property.has_playground or property.sports_area or property.sauna or property.turkish_bath or property.jacuzzi or property.court or property.bar">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-building"/> Servicios del Edificio</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.elevator">
                                            <i class="fa fa-check-circle text-primary me-2"/> Ascensor
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.private_elevator">
                                            <i class="fa fa-check-circle text-primary me-2"/> Ascensor Privado
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.gym">
                                            <i class="fa fa-check-circle text-primary me-2"/> Gimnasio
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.pools">
                                            <i class="fa fa-check-circle text-primary me-2"/> Piscina <span t-if="property.n_pools" class="badge bg-info ms-1" t-esc="property.n_pools"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.social_room">
                                            <i class="fa fa-check-circle text-primary me-2"/> Salón Social
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.green_areas">
                                            <i class="fa fa-check-circle text-primary me-2"/> Zonas Verdes
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.has_playground">
                                            <i class="fa fa-check-circle text-primary me-2"/> Zona de Juegos Infantiles
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.sports_area">
                                            <i class="fa fa-check-circle text-primary me-2"/> Cancha Deportiva
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.sauna">
                                            <i class="fa fa-check-circle text-primary me-2"/> Sauna
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.turkish_bath">
                                            <i class="fa fa-check-circle text-primary me-2"/> Baño Turco
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.jacuzzi">
                                            <i class="fa fa-check-circle text-primary me-2"/> Jacuzzi
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.court">
                                            <i class="fa fa-check-circle text-primary me-2"/> Cancha
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.bar">
                                            <i class="fa fa-check-circle text-primary me-2"/> Bar
                                        </div>
                                    </div>

                                    <!-- SERVICIOS Y COMODIDADES -->
                                    <div class="row mb-4" t-if="property.air_conditioning or property.hot_water or property.gas_installation or property.gas_heating or property.electric_heating or property.electric_plant or property.has_water or property.aqueduct_access">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-cogs"/> Servicios y Comodidades</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.air_conditioning">
                                            <i class="fa fa-check-circle text-info me-2"/> Aire Acondicionado <span t-if="property.n_air_conditioning" class="badge bg-info ms-1" t-esc="property.n_air_conditioning"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.hot_water">
                                            <i class="fa fa-check-circle text-info me-2"/> Agua Caliente
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.gas_installation">
                                            <i class="fa fa-check-circle text-info me-2"/> Red de Gas Natural
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.gas_heating">
                                            <i class="fa fa-check-circle text-info me-2"/> Calentador a Gas
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.electric_heating">
                                            <i class="fa fa-check-circle text-info me-2"/> Calentador Eléctrico
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.electric_plant">
                                            <i class="fa fa-check-circle text-info me-2"/> Planta Eléctrica
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.has_water">
                                            <i class="fa fa-check-circle text-info me-2"/> Agua
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.aqueduct_access">
                                            <i class="fa fa-check-circle text-info me-2"/> Acueducto
                                        </div>
                                    </div>

                                    <!-- SEGURIDAD -->
                                    <div class="row mb-4" t-if="property.has_security or property.security_cameras or property.alarm or property.intercom or property.security_door or property.doorman">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-shield"/> Seguridad</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.has_security">
                                            <i class="fa fa-check-circle text-warning me-2"/> Vigilancia 24/7
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.security_cameras">
                                            <i class="fa fa-check-circle text-warning me-2"/> Cámaras de Seguridad
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.alarm">
                                            <i class="fa fa-check-circle text-warning me-2"/> Alarma
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.intercom">
                                            <i class="fa fa-check-circle text-warning me-2"/> Citófono
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.security_door">
                                            <i class="fa fa-check-circle text-warning me-2"/> Puerta de Seguridad
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.doorman">
                                            <i class="fa fa-check-circle text-warning me-2"/> Portería <small class="text-muted" t-if="property.doorman" t-esc="dict(property._fields['doorman'].selection).get(property.doorman)"/>
                                        </div>
                                    </div>

                                    <!-- PARQUEADERO DETALLADO -->
                                    <div class="row mb-4" t-if="property.garage or property.covered_parking or property.uncovered_parking or property.visitors_parking or property.common_parking">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-car"/> Parqueadero</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.garage">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Garaje <span t-if="property.n_garage" class="badge bg-secondary ms-1" t-esc="property.n_garage"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.covered_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Cubierto <span class="badge bg-secondary ms-1" t-esc="property.covered_parking"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.uncovered_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Descubierto <span class="badge bg-secondary ms-1" t-esc="property.uncovered_parking"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.visitors_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Visitantes
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.common_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Común
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.linear_double_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Doble Lineal
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.parallel_double_parking">
                                            <i class="fa fa-check-circle text-secondary me-2"/> Parqueadero Doble Paralelo
                                        </div>
                                    </div>

                                    <!-- ESPACIOS Y HABITACIONES -->
                                    <div class="row mb-4" t-if="property.living_room or property.living_dining_room or property.main_dining_room or property.auxiliary_dining_room or property.study or property.entrance_hall or property.service_room or property.service_bathroom or property.auxiliary_bathroom or property.utility_room or property.n_closet or property.closet">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-th-large"/> Espacios y Habitaciones</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.living_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Sala
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.living_dining_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Sala Comedor
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.main_dining_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Comedor Principal
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.auxiliary_dining_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Comedor Auxiliar
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.study">
                                            <i class="fa fa-check-circle text-success me-2"/> Estudio
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.entrance_hall">
                                            <i class="fa fa-check-circle text-success me-2"/> Hall de Entrada
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.service_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Cuarto de Servicio
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.service_bathroom">
                                            <i class="fa fa-check-circle text-success me-2"/> Baño de Servicio
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.auxiliary_bathroom">
                                            <i class="fa fa-check-circle text-success me-2"/> Baño Auxiliar
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.utility_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Cuarto Útil
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.closet">
                                            <i class="fa fa-check-circle text-success me-2"/> Clósets <span t-if="property.n_closet" class="badge bg-success ms-1" t-esc="property.n_closet"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.n_dressing_room">
                                            <i class="fa fa-check-circle text-success me-2"/> Vestidores <span class="badge bg-success ms-1" t-esc="property.n_dressing_room"/>
                                        </div>
                                    </div>

                                    <!-- COCINAS -->
                                    <div class="row mb-4" t-if="property.simple_kitchen or property.integral_kitchen or property.american_kitchen or property.mixed_integral_kitchen">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-cutlery"/> Cocinas</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.simple_kitchen">
                                            <i class="fa fa-check-circle text-warning me-2"/> Cocina Sencilla
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.integral_kitchen">
                                            <i class="fa fa-check-circle text-warning me-2"/> Cocina Integral
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.american_kitchen">
                                            <i class="fa fa-check-circle text-warning me-2"/> Cocina Americana
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.mixed_integral_kitchen">
                                            <i class="fa fa-check-circle text-warning me-2"/> Cocina Integral Mixta
                                        </div>
                                    </div>

                                    <!-- ACABADOS Y PISOS -->
                                    <div class="row mb-4" t-if="property.floor_type or property.marble_floor or property.door_type or property.blinds or property.truck_door">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-paint-brush"/> Acabados y Materiales</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.floor_type">
                                            <i class="fa fa-check-circle text-info me-2"/> Piso: <strong t-esc="dict(property._fields['floor_type'].selection).get(property.floor_type)"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.marble_floor">
                                            <i class="fa fa-check-circle text-info me-2"/> Piso en Baldosa/Mármol
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.door_type">
                                            <i class="fa fa-check-circle text-info me-2"/> Puertas: <strong t-esc="dict(property._fields['door_type'].selection).get(property.door_type)"/>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.blinds">
                                            <i class="fa fa-check-circle text-info me-2"/> Persianas
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.truck_door">
                                            <i class="fa fa-check-circle text-info me-2"/> Puerta Camión
                                        </div>
                                    </div>

                                    <!-- ÁREAS EXTERIORES -->
                                    <div class="row mb-4" t-if="property.solar_area or property.solarium">
                                        <div class="col-12">
                                            <h5 class="text-danger mb-3"><i class="fa fa-sun-o"/> Áreas Exteriores Adicionales</h5>
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.solar_area">
                                            <i class="fa fa-check-circle text-success me-2"/> Solar
                                        </div>
                                        <div class="col-md-4 col-6 mb-2" t-if="property.solarium">
                                            <i class="fa fa-check-circle text-success me-2"/> Solarium
                                        </div>
                                    </div>

                                    <!-- Notas Adicionales OCULTAS (información interna sensible) -->
                                    <!-- <t t-if="property.note">
                                        <hr/>
                                        <h5 class="text-danger"><i class="fa fa-sticky-note"/> Notas Adicionales</h5>
                                        <div class="alert alert-warning mb-4" t-field="property.note"/>
                                    </t> -->

                                    <t t-if="property.latitude and property.longitude">
                                        <hr/>
                                        <h5><i class="fa fa-map text-primary"/> Ubicación en el Mapa</h5>
                                        <div id="property_map" style="height: 400px; width: 100%;" class="mb-4"
                                             t-att-data-lat="property.latitude"
                                             t-att-data-lng="property.longitude"
                                             t-att-data-name="property.name"/>
                                    </t>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <!-- FORMULARIO DE CONTACTO -->
                            <div class="card shadow-sm sticky-top mb-4" style="top: 20px; border: 2px solid #E31E24;">
                                <div class="card-header text-white" style="background: #E31E24;">
                                    <h5 class="mb-0"><i class="fa fa-envelope"/> Contactar</h5>
                                </div>
                                <div class="card-body">
                                    <form action="/contact/property" t-att-data-property-id="property.id" method="post" class="property-contact-form">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" name="property_id" t-att-value="property.id"/>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Nombre Completo *</label>
                                            <input type="text" name="name" class="form-control" required="required" placeholder="Tu nombre completo"/>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Correo Electrónico *</label>
                                            <input type="email" name="email" class="form-control" required="required" placeholder="tu@email.com"/>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Teléfono *</label>
                                            <input type="tel" name="phone" class="form-control" required="required" placeholder="+57 300 123 4567"/>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Tipo de Cliente</label>
                                            <select name="client_type" class="form-select">
                                                <option value="buyer">Comprador</option>
                                                <option value="tenant">Arrendatario</option>
                                                <option value="investor">Inversionista</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Fecha Ideal para Visita (Opcional)</label>
                                            <input type="datetime-local" name="ideal_visit_date" class="form-control"
                                                   placeholder="Seleccione fecha y hora"/>
                                            <small class="form-text text-muted">Si desea programar una visita, seleccione fecha y hora</small>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Mensaje</label>
                                            <textarea name="message" class="form-control" rows="4" placeholder="Estoy interesado en esta propiedad..."></textarea>
                                        </div>

                                        <button type="submit" class="btn w-100 text-white" style="background: #E31E24; border: none;">
                                            <i class="fa fa-send"/> Enviar Consulta
                                        </button>
                                    </form>

                                    <hr class="my-4"/>

                                    <div class="d-grid gap-2">
                                        <a href="/properties" class="btn btn-outline-secondary">
                                            <i class="fa fa-arrow-left"/> Volver a Propiedades
                                        </a>
                                        <a t-if="property.latitude and property.longitude"
                                           href="/properties/map" class="btn" style="background: #E31E24; color: white; border: none;">
                                            <i class="fa fa-map"/> Ver en Mapa
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- PROPIEDADES SIMILARES -->
                            <div class="card shadow-sm border-0">
                                <div class="card-header text-white" style="background: #E31E24;">
                                    <h5 class="mb-0"><i class="fa fa-th-large"/> Propiedades Similares</h5>
                                </div>
                                <div class="card-body">
                                    <div id="similar-properties-container">
                                        <div class="text-center text-muted py-4">
                                            <i class="fa fa-spinner fa-spin fa-2x mb-2"></i>
                                            <p>Cargando propiedades similares...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    // Mapa
                    const mapElement = document.getElementById('property_map');
                    if (mapElement) {
                        const lat = parseFloat(mapElement.dataset.lat);
                        const lng = parseFloat(mapElement.dataset.lng);
                        const name = mapElement.dataset.name;

                        if (lat &amp;&amp; lng) {
                            const map = L.map('property_map').setView([lat, lng], 15);

                            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                attribution: '© OpenStreetMap contributors'
                            }).addTo(map);

                            L.marker([lat, lng]).addTo(map)
                                .bindPopup(`&lt;b&gt;${name}&lt;/b&gt;`)
                                .openPopup();
                        }
                    }

                    // Cargar propiedades similares
                    loadSimilarProperties();
                });

                async function loadSimilarProperties() {
                    const container = document.getElementById('similar-properties-container');
                    const propertyId = <t t-esc="property.id"/>;

                    try {
                        const response = await fetch(`/property/${propertyId}/similar`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({})
                        });

                        const data = await response.json();

                        if (data.success &amp;&amp; data.properties &amp;&amp; data.properties.length > 0) {
                            let html = '';
                            data.properties.forEach(prop => {
                                const imageUrl = prop.image_url || '/theme_bohio_real_estate/static/src/img/banner1.jpg';
                                const price = new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 0 }).format(prop.list_price);
                                const priceLabel = prop.type_service === 'rent' ? `${price}/mes` : price;

                                html += `
                                    &lt;div class="card mb-3 border-0 shadow-sm" style="cursor: pointer;" onclick="window.location='/property/${prop.id}'"&gt;
                                        &lt;div class="row g-0"&gt;
                                            &lt;div class="col-4"&gt;
                                                &lt;img src="${imageUrl}" class="img-fluid rounded-start" style="height: 100px; width: 100%; object-fit: cover;" alt="${prop.name}"/&gt;
                                            &lt;/div&gt;
                                            &lt;div class="col-8"&gt;
                                                &lt;div class="card-body p-2"&gt;
                                                    &lt;h6 class="card-title mb-1 small text-truncate"&gt;${prop.name.substring(0, 30)}...&lt;/h6&gt;
                                                    &lt;p class="mb-1 small text-muted"&gt;&lt;i class="fa fa-map-marker text-danger"&gt;&lt;/i&gt; ${prop.city}&lt;/p&gt;
                                                    &lt;p class="mb-0 fw-bold text-danger small"&gt;${priceLabel}&lt;/p&gt;
                                                    &lt;div class="d-flex gap-2 small text-muted mt-1"&gt;
                                                        ${prop.bedrooms ? `&lt;span&gt;&lt;i class="fa fa-bed"&gt;&lt;/i&gt; ${prop.bedrooms}&lt;/span&gt;` : ''}
                                                        ${prop.bathrooms ? `&lt;span&gt;&lt;i class="fa fa-bath"&gt;&lt;/i&gt; ${prop.bathrooms}&lt;/span&gt;` : ''}
                                                        ${prop.area_constructed ? `&lt;span&gt;&lt;i class="fa fa-arrows-alt"&gt;&lt;/i&gt; ${prop.area_constructed}m²&lt;/span&gt;` : ''}
                                                    &lt;/div&gt;
                                                &lt;/div&gt;
                                            &lt;/div&gt;
                                        &lt;/div&gt;
                                    &lt;/div&gt;
                                `;
                            });

                            container.innerHTML = html;
                        } else {
                            container.innerHTML = `
                                &lt;div class="text-center text-muted py-4"&gt;
                                    &lt;i class="fa fa-info-circle fa-2x mb-2"&gt;&lt;/i&gt;
                                    &lt;p&gt;No se encontraron propiedades similares&lt;/p&gt;
                                &lt;/div&gt;
                            `;
                        }
                    } catch (error) {
                        console.error('Error cargando propiedades similares:', error);
                        container.innerHTML = `
                            &lt;div class="alert alert-danger"&gt;
                                &lt;i class="fa fa-exclamation-triangle"&gt;&lt;/i&gt; Error al cargar propiedades similares
                            &lt;/div&gt;
                        `;
                    }
                }
            </script>

            <!-- Botón Flotante de WhatsApp - Rojo BOHIO -->
            <button class="btn bohio-whatsapp-float-btn shadow-lg"
                    id="whatsappFloatBtn"
                    onclick="openWhatsAppModal()"
                    style="position: fixed; bottom: 30px; right: 30px; z-index: 1000; background: #E31E24; color: white; border: none; border-radius: 50px; padding: 15px 25px; font-weight: 600; transition: all 0.3s ease;">
                <i class="fa fa-whatsapp fa-2x"></i>
                <span class="whatsapp-float-text ms-2">Consultar</span>
            </button>

            <!-- Modal Formulario WhatsApp -->
            <div class="modal fade" id="whatsappModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header text-white" style="background: #E31E24;">
                            <h5 class="modal-title">
                                <i class="fa fa-whatsapp me-2"></i>Consultar por WhatsApp
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="property-info-summary mb-4 p-3 bg-light rounded">
                                <h6 class="fw-bold mb-2">Propiedad de Interés:</h6>
                                <p class="mb-1 small"><strong>Código:</strong> <span t-esc="property.default_code or 'N/A'"/></p>
                                <p class="mb-0 small text-truncate"><strong>Nombre:</strong> <span t-esc="property.name"/></p>
                            </div>

                            <form id="whatsappForm" onsubmit="sendWhatsAppMessage(event)">
                                <input type="hidden" name="property_id" t-att-value="property.id"/>
                                <input type="hidden" name="property_name" t-att-value="property.name"/>
                                <input type="hidden" name="property_code" t-att-value="property.default_code"/>
                                <input type="hidden" name="property_url" t-att-value="request.httprequest.url"/>

                                <div class="mb-3">
                                    <label for="customer_name" class="form-label fw-semibold">
                                        <i class="fa fa-user text-danger me-1"></i>Nombre Completo *
                                    </label>
                                    <input type="text" class="form-control" id="customer_name" name="customer_name"
                                           required="required" placeholder="Tu nombre completo"/>
                                </div>

                                <div class="mb-3">
                                    <label for="customer_phone" class="form-label fw-semibold">
                                        <i class="fa fa-phone text-danger me-1"></i>Teléfono / WhatsApp *
                                    </label>
                                    <input type="tel" class="form-control" id="customer_phone" name="customer_phone"
                                           required="required" placeholder="+57 300 123 4567"/>
                                    <small class="text-muted">Formato: +57 seguido de tu número</small>
                                </div>

                                <div class="mb-3">
                                    <label for="customer_email" class="form-label fw-semibold">
                                        <i class="fa fa-envelope text-danger me-1"></i>Email
                                    </label>
                                    <input type="email" class="form-control" id="customer_email" name="customer_email"
                                           placeholder="tu@email.com"/>
                                </div>

                                <div class="mb-3">
                                    <label for="customer_message" class="form-label fw-semibold">
                                        <i class="fa fa-comment text-danger me-1"></i>Mensaje Adicional
                                    </label>
                                    <textarea class="form-control" id="customer_message" name="customer_message"
                                              rows="3" placeholder="¿Tienes alguna pregunta específica?"></textarea>
                                </div>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="accept_terms" required="required"/>
                                    <label class="form-check-label small" for="accept_terms">
                                        Acepto la <a href="/privacy" target="_blank">Política de Privacidad</a> y
                                        <a href="/terms" target="_blank">Términos de Servicio</a> *
                                    </label>
                                </div>

                                <div class="d-grid">
                                    <button type="submit" class="btn btn-lg" style="background: #E31E24; color: white; border: none;">
                                        <i class="fa fa-whatsapp me-2"></i>Enviar Mensaje por WhatsApp
                                    </button>
                                </div>
                            </form>

                            <div id="whatsappLoading" class="text-center py-4" style="display: none;">
                                <div class="spinner-border text-success" role="status">
                                    <span class="visually-hidden">Enviando...</span>
                                </div>
                                <p class="mt-2 text-muted">Creando oportunidad...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                function openWhatsAppModal() {
                    const modal = new bootstrap.Modal(document.getElementById('whatsappModal'));
                    modal.show();
                }

                function showSuccessNotification(title, message) {
                    // Crear contenedor de notificación si no existe
                    let container = document.getElementById('successNotificationContainer');
                    if (!container) {
                        container = document.createElement('div');
                        container.id = 'successNotificationContainer';
                        container.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 400px;';
                        document.body.appendChild(container);
                    }

                    // Crear notificación
                    const notification = document.createElement('div');
                    notification.className = 'alert alert-success alert-dismissible fade show shadow-lg';
                    notification.style.cssText = 'animation: slideInRight 0.5s ease;';
                    notification.innerHTML = `
                        <div class="d-flex align-items-start">
                            <i class="fa fa-check-circle fa-2x text-success me-3"></i>
                            <div>
                                <h5 class="alert-heading mb-1">${title}</h5>
                                <p class="mb-0">${message}</p>
                            </div>
                            <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert"></button>
                        </div>
                    `;

                    container.appendChild(notification);

                    // Auto-remover después de 6 segundos
                    setTimeout(() => {
                        notification.classList.remove('show');
                        setTimeout(() => notification.remove(), 300);
                    }, 6000);
                }

                // Agregar animación CSS
                if (!document.getElementById('whatsapp-notification-styles')) {
                    const style = document.createElement('style');
                    style.id = 'whatsapp-notification-styles';
                    style.textContent = `
                        @keyframes slideInRight {
                            from {
                                transform: translateX(100%);
                                opacity: 0;
                            }
                            to {
                                transform: translateX(0);
                                opacity: 1;
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }

                function sendWhatsAppMessage(event) {
                    event.preventDefault();

                    const form = event.target;
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData);

                    // Construir mensaje de WhatsApp
                    const whatsappNumber = '573001234567'; // Número de BOHIO
                    const message = `Hola BOHIO!\n\n` +
                                  `Me interesa la propiedad:\n` +
                                  `*${data.property_name}*\n` +
                                  `Código: *${data.property_code}*\n\n` +
                                  `Mi nombre: ${data.customer_name}\n` +
                                  `Teléfono: ${data.customer_phone}\n` +
                                  `${data.customer_email ? 'Email: ' + data.customer_email + '\n' : ''}` +
                                  `${data.customer_message ? '\n' + data.customer_message + '\n' : ''}` +
                                  `\nVer propiedad: ${data.property_url}`;

                    const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

                    // Abrir WhatsApp
                    window.open(whatsappURL, '_blank');

                    // Cerrar modal y resetear formulario
                    bootstrap.Modal.getInstance(document.getElementById('whatsappModal')).hide();
                    form.reset();

                    // Mostrar mensaje de éxito
                    showSuccessNotification(
                        '¡Redirigiendo a WhatsApp!',
                        'Se abrirá WhatsApp con tu mensaje pre-cargado.'
                    );
                }
            </script>
        </t>
    </template>
</odoo>