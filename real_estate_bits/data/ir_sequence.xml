<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data noupdate="1">

        <record id="sequence_rental_contract" model="ir.sequence">
            <field name="name">Rental Contract</field>
            <field name="code">rental.contract</field>
            <field name="prefix">RC/%(range_year)s/</field>
            <field eval="1" name="number_next"/>
            <field eval="1" name="number_increment"/>
            <field eval="True" name="use_date_range"/>
            <field eval="False" name="company_id"/>
            <field name="padding">4</field>
        </record>

        <record id="sequence_novedad_contract" model="ir.sequence">
            <field name="name">property.contract.novedad.seq</field>
            <field name="code">property.contract.novedad.seq</field>
            <field name="prefix">NOC-</field>
            <field eval="1" name="number_next"/>
            <field eval="1" name="number_increment"/>
            <field eval="False" name="company_id"/>
            <field name="padding">4</field>
        </record>

        <record id="sequence_property_booking" model="ir.sequence">
            <field name="name">Property Booking</field>
            <field name="code">property.booking</field>
            <field name="prefix">PB/%(range_year)s/</field>
            <field eval="1" name="number_next"/>
            <field eval="1" name="number_increment"/>
            <field eval="True" name="use_date_range"/>
            <field eval="False" name="company_id"/>
            <field name="padding">4</field>
        </record>

        <record id="sequence_bohio_mass_payment" model="ir.sequence">
            <field name="name">Bohio Mass Payment</field>
            <field name="code">bohio.mass.payment</field>
            <field name="prefix">BMP/%(range_year)s/</field>
            <field eval="1" name="number_next"/>
            <field eval="1" name="number_increment"/>
            <field eval="True" name="use_date_range"/>
            <field eval="False" name="company_id"/>
            <field name="padding">4</field>
        </record>

        <record id="sequence_bohio_debit_note" model="ir.sequence">
            <field name="name">Bohio Debit Note</field>
            <field name="code">bohio.debit.note</field>
            <field name="prefix">BDN/%(range_year)s/</field>
            <field eval="1" name="number_next"/>
            <field eval="1" name="number_increment"/>
            <field eval="True" name="use_date_range"/>
            <field eval="False" name="company_id"/>
            <field name="padding">4</field>
        </record>

    </data>
    <!-- Comentado temporalmente hasta que se definan los modelos necesarios -->
    <!--
    <data noupdate="1">

        <record id="ir_cron_cleanup_property_cache" model="ir.cron">
            <field name="name">Property Filters: Cleanup Expired Cache</field>
            <field name="model_id" ref="model_property_cache"/>
            <field name="state">code</field>
            <field name="code">model.cleanup_expired()</field>
            <field name="interval_number">6</field>
            <field name="interval_type">hours</field>
            <field name="active">True</field>
        </record>

        <record id="ir_cron_update_popularity_scores" model="ir.cron">
            <field name="name">Property Filters: Update Popularity Scores</field>
            <field name="model_id" ref="model_product_template"/>
            <field name="state">code</field>
            <field name="code">
# Actualizar scores basado en analytics recientes
#analytics = env['property.analytics']
#properties = env['product.template'].search([('is_property', '=', True)])
#
#for prop in properties:
#   recent_views = analytics.search_count([
#        ('property_id', '=', prop.id),
#        ('event_type', '=', 'view'),
#        ('event_date', '>=', fields.Datetime.now() - timedelta(days=7))
#    ])
#
#    # Calcular nuevo score
#    new_score = recent_views * 0.1 + prop.property_popularity_score * 0.9
#    prop.property_popularity_score = new_score
            </field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="active">True</field>
        </record>

        <record id="ir_cron_cleanup_old_analytics" model="ir.cron">
            <field name="name">Property Filters: Cleanup Old Analytics</field>
            <field name="model_id" ref="model_property_analytics"/>
            <field name="state">code</field>
            <field name="code">
# Eliminar analytics de más de 1 año
#cutoff_date = fields.Datetime.now() - timedelta(days=365)
#old_records = model.search([('event_date', '&lt;', cutoff_date)])
#count = len(old_records)
#old_records.unlink()
#if count != 0:
#    env['property.cache'].clear_cache('property_filters_%')
            </field>
            <field name="interval_number">1</field>
            <field name="interval_type">weeks</field>
            <field name="active">True</field>
        </record>

    </data>
    -->
</odoo>
