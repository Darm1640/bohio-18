<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- ====================================================================== -->
        <!-- MENÚS BOHIO CRM -->
        <!-- ====================================================================== -->

        <!-- Menú Raíz -->
        <menuitem id="menu_bohio_crm_root"
                  name="Bohio CRM"
                  sequence="5"
                  web_icon="bohio_crm,static/description/icon.png"/>

        <!-- Dashboard Principal -->
        <menuitem id="menu_crm_my_dashboard"
                  name="Mi Dashboard"
                  parent="menu_bohio_crm_root"
                  action="action_crm_salesperson_dashboard_client"
                  sequence="1"
                  groups="sales_team.group_sale_salesman"/>

        <!-- ====================================================================== -->
        <!-- SECCIÓN: OPORTUNIDADES -->
        <!-- ====================================================================== -->
        <menuitem id="menu_bohio_crm_opportunities"
                  name="Oportunidades"
                  parent="menu_bohio_crm_root"
                  sequence="10"/>

        <!-- Acción: Mis Oportunidades -->
        <record id="action_bohio_crm_my_opportunities" model="ir.actions.act_window">
            <field name="name">Mis Oportunidades</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">kanban,list,form,calendar,graph,pivot,activity</field>
            <field name="domain">[('type', '=', 'opportunity'), ('user_id', '=', uid)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
            }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    ¡Crea tu primera oportunidad!
                </p>
                <p>
                    Gestiona tus oportunidades de venta inmobiliaria con todas las herramientas de BOHIO CRM.
                </p>
            </field>
        </record>

        <menuitem id="menu_crm_my_opportunities"
                  name="Mis Oportunidades"
                  parent="menu_bohio_crm_opportunities"
                  action="action_bohio_crm_my_opportunities"
                  sequence="1"
                  groups="sales_team.group_sale_salesman"/>

        <!-- Acción: Todas las Oportunidades -->
        <record id="action_bohio_crm_all_opportunities" model="ir.actions.act_window">
            <field name="name">Todas las Oportunidades</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">kanban,list,form,calendar,graph,pivot,activity</field>
            <field name="domain">[('type', '=', 'opportunity')]</field>
            <field name="context">{
                'default_type': 'opportunity',
            }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No hay oportunidades registradas
                </p>
                <p>
                    Vista completa de todas las oportunidades del equipo.
                </p>
            </field>
        </record>

        <menuitem id="menu_crm_all_opportunities"
                  name="Todas las Oportunidades"
                  parent="menu_bohio_crm_opportunities"
                  action="action_bohio_crm_all_opportunities"
                  sequence="2"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Mis Leads -->
        <record id="action_bohio_crm_my_leads" model="ir.actions.act_window">
            <field name="name">Mis Leads</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">list,kanban,form,graph,pivot</field>
            <field name="domain">[('type', '=', 'lead'), ('user_id', '=', uid)]</field>
            <field name="context">{
                'default_type': 'lead',
                'default_user_id': uid,
            }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    ¡Registra tu primer lead!
                </p>
                <p>
                    Los leads son contactos potenciales que aún no se han calificado como oportunidades.
                </p>
            </field>
        </record>

        <menuitem id="menu_crm_my_leads"
                  name="Mis Leads"
                  parent="menu_bohio_crm_opportunities"
                  action="action_bohio_crm_my_leads"
                  sequence="3"
                  groups="sales_team.group_sale_salesman"/>

        <!-- ====================================================================== -->
        <!-- SECCIÓN: REPORTES Y ANÁLISIS -->
        <!-- ====================================================================== -->
        <menuitem id="menu_bohio_crm_reports"
                  name="Reportes"
                  parent="menu_bohio_crm_root"
                  sequence="20"
                  groups="sales_team.group_sale_salesman"/>

        <!-- Acción: Pipeline de Ventas -->
        <record id="action_bohio_crm_pipeline_report" model="ir.actions.act_window">
            <field name="name">Pipeline de Ventas</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">graph,pivot,list</field>
            <field name="domain">[('type', '=', 'opportunity')]</field>
            <field name="context">{
                'pivot_measures': ['expected_revenue', 'estimated_commission'],
                'pivot_column_groupby': ['stage_id'],
                'pivot_row_groupby': ['user_id'],
            }</field>
        </record>

        <menuitem id="menu_crm_pipeline_report"
                  name="Pipeline de Ventas"
                  parent="menu_bohio_crm_reports"
                  action="action_bohio_crm_pipeline_report"
                  sequence="1"
                  groups="sales_team.group_sale_salesman"/>

        <!-- Acción: Comisiones -->
        <record id="action_bohio_crm_commission_report" model="ir.actions.act_window">
            <field name="name">Análisis de Comisiones</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">pivot,graph,list</field>
            <field name="domain">[('type', '=', 'opportunity'), ('probability', '>', 0)]</field>
            <field name="context">{
                'pivot_measures': ['estimated_commission', 'expected_revenue'],
                'pivot_column_groupby': ['user_id'],
                'pivot_row_groupby': ['stage_id'],
            }</field>
        </record>

        <menuitem id="menu_crm_commission_report"
                  name="Comisiones"
                  parent="menu_bohio_crm_reports"
                  action="action_bohio_crm_commission_report"
                  sequence="2"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Actividades -->
        <record id="action_bohio_crm_activities_report" model="ir.actions.act_window">
            <field name="name">Mis Actividades</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">activity,list,kanban</field>
            <field name="domain">[('type', '=', 'opportunity'), ('user_id', '=', uid)]</field>
        </record>

        <menuitem id="menu_crm_activities"
                  name="Actividades"
                  parent="menu_bohio_crm_reports"
                  action="action_bohio_crm_activities_report"
                  sequence="3"
                  groups="sales_team.group_sale_salesman"/>

        <!-- ====================================================================== -->
        <!-- SECCIÓN: CONFIGURACIÓN -->
        <!-- ====================================================================== -->
        <menuitem id="menu_bohio_crm_config"
                  name="Configuración"
                  parent="menu_bohio_crm_root"
                  sequence="90"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Etapas -->
        <menuitem id="menu_crm_stages"
                  name="Etapas"
                  parent="menu_bohio_crm_config"
                  action="crm.crm_stage_action"
                  sequence="1"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Equipos de Ventas -->
        <menuitem id="menu_crm_teams"
                  name="Equipos de Ventas"
                  parent="menu_bohio_crm_config"
                  action="sales_team.crm_team_action_config"
                  sequence="2"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Tipos de Actividad -->
        <menuitem id="menu_crm_activity_types"
                  name="Tipos de Actividad"
                  parent="menu_bohio_crm_config"
                  action="mail.mail_activity_type_action"
                  sequence="3"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Etiquetas -->
        <menuitem id="menu_crm_tags"
                  name="Etiquetas"
                  parent="menu_bohio_crm_config"
                  action="sales_team.sales_team_crm_tag_action"
                  sequence="4"
                  groups="sales_team.group_sale_manager"/>

        <!-- Acción: Motivos de Pérdida -->
        <menuitem id="menu_crm_lost_reasons"
                  name="Motivos de Pérdida"
                  parent="menu_bohio_crm_config"
                  action="crm.crm_lost_reason_action"
                  sequence="5"
                  groups="sales_team.group_sale_manager"/>

    </data>
</odoo>
